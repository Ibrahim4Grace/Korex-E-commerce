<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Korex StyleHub</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Korex StyleHub" name="keywords">
    <meta content="Korex StyleHub" name="description">

    <!-- Favicon -->
    <link href="../img/logo.PNG" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">  

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="../lib/animate/animate.min.css" rel="stylesheet">
    <link href="../lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="../css/style.css" rel="stylesheet">
    <link href="../css/landingPage.css" rel="stylesheet">
</head>

<body>
   
 <!-- Navbar Start -->
 <%- include (`../partials/header`); -%>
 <!-- Navbar End -->


 <div class="container mt-3">
    <form action="/user/registerUserPost" method="post" enctype="multipart/form-data">
        <div class="row jumbotron box8">
            <div class="col-sm-12 mx-t3 mb-4">
                <h2 class="text-center text-infos">Register</h2>
            </div> 
            <%- include ('../partials/messages'); -%>
            <div class="col-sm-6 form-group">
                <label for="name-f">First Name</label>
                <input type="text" class="form-control" name="customerFirstName" placeholder="Enter your first name.">
             
            </div>
            <div class="col-sm-6 form-group">
                <label for="name-l">Last name</label>
                <input type="text" class="form-control" name="customerLastName" placeholder="Enter your last name." value="<%= typeof customerLastName != 'undefined' ? customerLastName : '' %>" >
            </div>
            <div class="col-sm-6 form-group">
                <label for="email">Email</label>
                <input type="email" class="form-control" name="customerEmail" placeholder="Enter your email." value="<%= typeof customerEmail != 'undefined' ? customerEmail : '' %>" >
            </div>
            <div class="col-sm-6 form-group">
                <label for="address-1">Username</label>
                <input type="text" class="form-control" name="customerUsername" placeholder="Enter username" value="<%= typeof customerUsername != 'undefined' ? customerUsername : '' %>" >
            </div>
            <div class="col-sm-6 form-group">
                <label for="address-2">Address</label>
                <input type="address" class="form-control" name="customerAddress" placeholder="Locality/House/Street no." value="<%= typeof customerAddress != 'undefined' ? customerAddress : '' %>" >
            </div>
            <div class="col-sm-4 form-group">
                <label for="city">City</label>
                <input type="text" class="form-control" name="customerCity" placeholder="Enter city Name" value="<%= typeof customerCity != 'undefined' ? customerCity : '' %>" >
            </div>
            <div class="col-sm-2 form-group">
                <label for="state">State</label>
                <input type="text" class="form-control" name="customerState" placeholder="Enter state" value="<%= typeof customerState != 'undefined' ? customerState : '' %>" >
            </div>
            <div class="col-sm-6 form-group">
                <% const countries = [
                "Afghanistan", "Ã…land Islands", "Albania", "Algeria", "American Samoa", "Andorra", "Angola", "Anguilla", "Antarctica", "Antigua and Barbuda",
                "Argentina", "Armenia", "Aruba", "Australia", "Austria", "Azerbaijan", "Bahamas", "Bahrain", "Bangladesh", "Barbados", "Belarus", "Belgium",
                "Belize", "Benin", "Bermuda", "Bhutan", "Bolivia", "Bosnia and Herzegovina", "Botswana", "Bouvet Island", "Brazil", "British Indian Ocean Territory",
                "Brunei Darussalam", "Bulgaria", "Burkina Faso", "Burundi", "Cambodia", "Cameroon", "Canada", "Cape Verde", "Cayman Islands", "Central African Republic",
                "Chad", "Chile", "China", "Christmas Island", "Cocos (Keeling) Islands", "Colombia", "Comoros", "Congo", "Congo, The Democratic Republic of The",
                "Cook Islands", "Costa Rica", "Cote D'ivoire", "Croatia", "Cuba", "Cyprus", "Czech Republic", "Denmark", "Djibouti", "Dominica", "Dominican Republic",
                "Ecuador", "Egypt", "El Salvador", "Equatorial Guinea", "Eritrea", "Estonia", "Ethiopia", "Falkland Islands (Malvinas)", "Faroe Islands", "Fiji",
                "Finland", "France", "French Guiana", "French Polynesia", "French Southern Territories", "Gabon", "Gambia", "Georgia", "Germany", "Ghana", "Gibraltar",
                "Greece", "Greenland", "Grenada", "Guadeloupe", "Guam", "Guatemala", "Guernsey", "Guinea", "Guinea-bissau", "Guyana", "Haiti", "Heard Island and Mcdonald Islands",
                "Holy See (Vatican City State)", "Honduras", "Hong Kong", "Hungary", "Iceland", "India", "Indonesia", "Iran, Islamic Republic of", "Iraq", "Ireland",
                "Isle of Man", "Israel", "Italy", "Jamaica", "Japan", "Jersey", "Jordan", "Kazakhstan", "Kenya", "Kiribati", "Korea, Democratic People's Republic of",
                "Korea, Republic of", "Kuwait", "Kyrgyzstan", "Lao People's Democratic Republic", "Latvia", "Lebanon", "Lesotho", "Liberia", "Libyan Arab Jamahiriya",
                "Liechtenstein", "Lithuania", "Luxembourg", "Macao", "Macedonia, The Former Yugoslav Republic of", "Madagascar", "Malawi", "Malaysia", "Maldives", "Mali",
                "Malta", "Marshall Islands", "Martinique", "Mauritania", "Mauritius", "Mayotte", "Mexico", "Micronesia, Federated States of", "Moldova, Republic of", "Monaco",
                "Mongolia", "Montenegro", "Montserrat", "Morocco", "Mozambique", "Myanmar", "Namibia", "Nauru", "Nepal", "Netherlands", "Netherlands Antilles", "New Caledonia",
                "New Zealand", "Nicaragua", "Niger", "Nigeria", "Niue", "Norfolk Island", "Northern Mariana Islands", "Norway", "Oman", "Pakistan", "Palau", "Palestinian Territory, Occupied",
                "Panama", "Papua New Guinea", "Paraguay", "Peru", "Philippines", "Pitcairn", "Poland", "Portugal", "Puerto Rico", "Qatar", "Reunion", "Romania", "Russian Federation",
                "Rwanda", "Saint Helena", "Saint Kitts and Nevis", "Saint Lucia", "Saint Pierre and Miquelon", "Saint Vincent and The Grenadines", "Samoa", "San Marino", "Sao Tome and Principe",
                "Saudi Arabia", "Senegal", "Serbia", "Seychelles", "Sierra Leone", "Singapore", "Slovakia", "Slovenia", "Solomon Islands", "Somalia", "South Africa",
                "South Georgia and The South Sandwich Islands", "Spain", "Sri Lanka", "Sudan", "Suriname", "Svalbard and Jan Mayen", "Swaziland", "Sweden", "Switzerland",
                "Syrian Arab Republic", "Taiwan, Province of China", "Tajikistan", "Tanzania, United Republic of", "Thailand", "Timor-leste", "Togo", "Tokelau", "Tonga",
                "Trinidad and Tobago", "Tunisia", "Turkey", "Turkmenistan", "Turks and Caicos Islands", "Tuvalu", "Uganda", "Ukraine", "United Arab Emirates", "United Kingdom",
                "United States", "United States Minor Outlying Islands", "Uruguay", "Uzbekistan", "Vanuatu", "Venezuela", "Viet Nam", "Virgin Islands, British", "Virgin Islands, U.S.",
                "Wallis and Futuna", "Western Sahara", "Yemen", "Zambia", "Zimbabwe"]; %>
                <label for="Country">Country</label>
                <select class="form-control custom-select browser-default" name="customerCountry"
                value="<%= typeof customerCountry != 'undefined' ? customerCountry : '' %>" >
                       <option value="">Select Country</option>
                 <% countries.forEach((country )=> { %>
                    <option value="<%- country  %>"><%- country  %></option>
                    <% }) %>
                </select>
            </div>

 

        <div class="col-sm-6 form-group">
          <label for="Date">Date Of Birth</label>
          <input type="Date" name="customerDob" class="form-control" placeholder="" value="<%= typeof customerDob != 'undefined' ? customerDob : '' %>" >
        </div>
        <div class="col-sm-6 form-group">
            <label for="pass">Phone Number</label>
            <input type="text" name="customerNumber" class="form-control" placeholder="Enter your phone number."  value="<%= typeof customerNumber != 'undefined' ? customerNumber : '' %>" >
        </div>
        <div class="col-sm-6 form-group">
            <label for="pass">Image</label>
            <input type="file" name="image" class="form-control" placeholder="Enter your password." >
        </div>
        <div class="col-sm-6 form-group">
          <label for="pass">Password</label>
          <input type="Password" name="customerPassword" class="form-control" placeholder="Enter your password." value="<%= typeof customerPassword != 'undefined' ? customerPassword : '' %>" >
        </div>
        <div class="col-sm-6 form-group">
          <label for="pass2">Confirm Password</label>
          <input type="Password" name="customerPassword1" class="form-control" placeholder="Re-enter your password." value="<%= typeof customerPassword1 != 'undefined' ? customerPassword1 : '' %>" >
        </div>
        <input type="hidden" value="User" name="role" class="form-control" >
       
  
        <div class="col-sm-12 form-group mb-0">
          <button class="btn btn-primary float-right">Submit</button>
        </div>
  
      </div>
    </form>
  </div>

  <script>
    document.getElementById('registrationForm').addEventListener('submit', async (event)=> {
    event.preventDefault(); // Prevent default form submission

  const formData = new FormData(event.target); // Get form data

  try {
    const response = await fetch('/user/registerUserPost', {
      method: 'POST',
      headers: {
        'Content-Type': 'multipart/form-data'
      },
      body: json.stringify(Object.fromEntries(formData)),
    });

    const responseData = await response.json();

    if (responseData.ok) {
      // Registration successful, redirect or show success message
      window.location.href = '/user/login'; // Redirect to a success page
    } else {
      // Registration failed, display error messages
    //   const errors = responseData.errors.map(error => error.msg);
      console.error('Validation errors', responseData.errors);
    }
  } catch (error) {
    console.error('Error: creating user', error);
    alert('An error occurred while processing your request.');
  }
});

  </script>


    <!-- Footer Start -->
    <%- include (`../partials/footer`); -%>
    <!-- Footer End -->



</body>

</html>